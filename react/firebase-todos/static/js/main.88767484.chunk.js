(window.webpackJsonptodos=window.webpackJsonptodos||[]).push([[0],{24:function(e,t,a){e.exports=a(41)},30:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),o=a(11),r=a.n(o),i=(a(29),a(30),a(14)),l=a(4),c=a(5),d=a(7),u=a(6),h=a(8),m=a(22),p=a.n(m),f=a(12),b=a(13),v=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.appTitle,a=e.user,n=e.signInWithGoogle,o=e.signOut;return s.a.createElement("nav",{className:"navbar navbar-light bg-light"},s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"col-md-8 offset-md-2"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("span",{className:"navbar-brand mb-0 h1"},s.a.createElement(f.a,{icon:b.c}),s.a.createElement("span",{className:"ml-2"},t))),s.a.createElement("div",{className:"col align-self-end text-right"},a?s.a.createElement("span",{className:"navbar-text pr-3"},"Hello, ",a.displayName):s.a.createElement("span",{className:"navbar-text"}),a?s.a.createElement("button",{className:"btn btn-dark",onClick:o},"Sign Out"):s.a.createElement("button",{className:"btn btn-dark",onClick:n},"Sign In with Google"))))))}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={value:""},a.input=s.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleValue",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props,a=t.app;t.onInsert.bind(a,this.state.value)(),this.setState({value:""}),this.input.current.focus(),e.preventDefault()}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},s.a.createElement("div",{className:"form-row"},s.a.createElement("div",{className:"col-10"},s.a.createElement("input",{type:"text",className:"form-control",placeholder:"Type your todo here",value:this.state.value,onChange:this.handleValue.bind(this),ref:this.input})),s.a.createElement("div",{className:"col-2"},s.a.createElement("input",{type:"submit",value:"INS",className:"btn btn-primary w-100"}))),this.props.alert&&s.a.createElement("div",{className:"alert alert-info mt-3"},this.props.alert))}}]),t}(n.Component),k=a(18),E=Object(k.b)((function(e){var t=e.indexToHandle,a=e.app,n=e.todo,o=e.onDelete,r=e.onCheck,i=!n.checked,l="alert alert-secondary bg-white todo-list-item";return l+=n.checked?" checked":"",s.a.createElement("div",{className:l},s.a.createElement(f.a,{icon:b.b,className:"list-item-grip"}),s.a.createElement("span",{className:"list-item-value"},n.value),s.a.createElement("span",{className:"btn-container"},s.a.createElement("button",{className:"btn btn-info btn-sm",onClick:r.bind(a,t,i)},s.a.createElement(f.a,{icon:b.a})),s.a.createElement("button",{className:"btn btn-danger btn-sm ml-2",onClick:o.bind(a,t)},s.a.createElement(f.a,{icon:b.d}))))})),y=Object(k.a)((function(e){var t=e.app,a=e.todos,n=e.onDelete,o=e.onCheck;return s.a.createElement("div",{className:"my-3"},a.map((function(e,a){return s.a.createElement(E,{key:a,index:a,indexToHandle:a,app:t,todo:e,onDelete:n,onCheck:o})})))})),N=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.app,a=e.todos,n=e.onDelete,o=e.onCheck,r=e.onSort;return s.a.createElement(y,{app:t,todos:a,onDelete:n,onCheck:o,onSortEnd:r.bind(t)})}}]),t}(n.Component),O={appTitle:"React-Firebase Todos",loadingMessage:"Loading data, please wait..",noDataMessage:"You are currently have no todo item, please add a new one :)",errorFirebaseMessage:"An error encountered while fetching the Firebase data, please reload the page :(",defaultData:[{id:0,value:"You can begin with inserting a new item",checked:!1},{id:1,value:"Or just delete this line :)",checked:!0}],firebase:{apiKey:"AIzaSyDMwPEwZczMTTnZk32khspKQsFzhZa4Y0I",authDomain:"react-todos-7f61d.firebaseapp.com",databaseURL:"https://react-todos-7f61d.firebaseio.com",projectId:"react-todos-7f61d",storageBucket:"",messagingSenderId:"537322359882",appId:"1:537322359882:web:714c65b1ad0c75dec66ab3"}},w=a(23),S=a(17),D=(a(36),a(38),function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={appTitle:O.appTitle,alert:!1,isLoggedIn:!1,firestoreData:!1,todos:[]};var n=j.firestore();return a.todosRef=n.collection("todos"),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(e.user!==this.props.user&&null!==this.props.user){var n=this.props.user.email,s=!1;this.setState({alert:O.loadingMessage}),this.todosRef.doc(n).get().then((function(e){var t=e.data();if("undefined"!==typeof t){var n=JSON.parse(t.content),o=t;a.setState({todos:n,alert:s,isLoggedIn:!0,firestoreData:o})}else{if(0===a.state.todos.length)s=O.noDataMessage;else{var r=JSON.stringify(a.state.todos),i=a.getCurrentDate();a.pushToFirestore({createdAt:i,updatedAt:i,content:r})}a.setState({alert:s,isLoggedIn:!0})}})).catch((function(e){a.setState({alert:O.errorFirebaseMessage})}))}if(e.user!==this.props.user&&null===this.props.user){var o=O.defaultData;this.setState({todos:o,isLoggedIn:!1,alert:!1})}if(t.todos!==this.state.todos&&!0===this.state.isLoggedIn){var r=JSON.stringify(this.state.todos),i=this.getCurrentDate(),l=!1,c=!1;this.state.firestoreData?(c=this.state.firestoreData.content,l={createdAt:this.state.firestoreData.createdAt,updatedAt:i,content:r}):l={createdAt:i,updatedAt:i,content:r},l.content!==c&&this.pushToFirestore(l)}t.todos!==this.state.todos&&0===this.state.todos.length&&this.setState({alert:O.noDataMessage})}},{key:"pushToFirestore",value:function(e){this.todosRef.doc(this.props.user.email).set(e).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))}},{key:"getCurrentDate",value:function(){var e=new Date;return e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()}},{key:"handleInsert",value:function(e){if(""!==e){var t=[{id:this.generateRamdomId(this.state.todos),value:e,checked:!1}].concat(this.state.todos);this.setState({todos:t,alert:!1})}else this.setState({alert:"The item can't be empty, please insert the new one!"})}},{key:"handleDelete",value:function(e){var t=this.state.todos.filter((function(t,a){return a!==e}));this.setState({todos:t})}},{key:"handleCheck",value:function(e,t){var a=Object(i.a)(this.state.todos),n=a[e].value;a[e]={value:n,checked:t},this.setState({todos:a})}},{key:"handleSort",value:function(e){var t=e.oldIndex,a=e.newIndex,n=p()(this.state.todos,t,a);this.setState({todos:n})}},{key:"generateRamdomId",value:function(e){var t="_"+Math.random().toString(36).substr(2,9);return 0===e.filter((function(e){return t===e.id})).length?t:this.generateRamdomId(e)}},{key:"render",value:function(){var e=this.state.appTitle,t=this.props,a=t.user,n=t.signInWithGoogle,o=t.signOut;return s.a.createElement(s.a.Fragment,null,s.a.createElement(v,{appTitle:e,user:a,signInWithGoogle:n,signOut:o}),s.a.createElement("div",{className:"container my-3"},s.a.createElement("div",{className:"col-md-8 offset-md-2"},s.a.createElement(g,{app:this,onInsert:this.handleInsert,alert:this.state.alert}),s.a.createElement(N,{app:this,todos:this.state.todos,onDelete:this.handleDelete,onCheck:this.handleCheck,onSort:this.handleSort}))))}}]),t}(n.Component)),j=S.initializeApp(O.firebase),I=j.auth(),C={googleProvider:new S.auth.GoogleAuthProvider},T=Object(w.a)({providers:C,firebaseAppAuth:I})(D);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.88767484.chunk.js.map